---
title: "2-14ì¥ íšŒê·€ë¶„ì„ ìœ í˜•"
author: "BBJ"
date: "2022-08-12"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R 2-14ì¥ íšŒê·€ë¶„ì„ì˜ ìœ í˜•

## ì„ í˜•íšŒê·€ì˜ ìœ í˜•:
  â€¢ ë‹¨ìˆœ ì„ í˜•íšŒê·€: simple(univariate) linear regression
    - í•œ ê°œì˜ ë…ë¦½ë³€ìˆ˜ì™€ ì¢…ì†ë³€ìˆ˜ ê°„ì˜ ë‹¨ìˆœí•œ(ì¼ì°¨) ì„ í˜• ê´€ê³„
    
  â€¢ ë‹¤ì¤‘ ì„ í˜•íšŒê·€: multiple(multivariate) linear regression
    - ë‘ ê°œ ì´ìƒì˜ ë…ë¦½ë³€ìˆ˜ì™€ ì¢…ì†ë³€ìˆ˜ ê°„ì˜ ì„ í˜• ê´€ê³„
    
  â€¢ ë‹¤í•­ ì„ í˜•íšŒê·€: polynomial linear regression
    - ì¢…ì†ë³€ìˆ˜ì™€ í•œ ê°œì˜ ë…ë¦½ë³€ìˆ˜ì˜ ë‹¤í•­ì‹ìœ¼ë¡œ êµ¬ì„±ëœ ë¹„ì„ í˜• ê´€ê³„

## â–ª lm() í•¨ìˆ˜ì™€ formula:
  â€¢ lm(formula, data):
    - formula: ì¢…ì†ë³€ìˆ˜ì™€ ë…ë¦½ë³€ìˆ˜ ê°„ì˜ ê´€ê³„ë¥¼ ì„¤ëª…í•˜ëŠ” í˜•ì‹
    - data: formulaë¥¼ ì ìš©í•  ë°ì´í„° ê°ì²´
      - ì¢…ì†ë³€ìˆ˜ ~ ë…ë¦½ë³€ìˆ˜1 + ë…ë¦½ë³€ìˆ˜2 + ë…ë¦½ë³€ìˆ˜3

â–ª Prestige ë°ì´í„°ì…‹
  â€¢ ìºë‚˜ë‹¤ì˜ ì¸êµ¬ì¡°ì‚¬ ë°ì´í„°(1971ë…„): ë³€ìˆ˜ 6ê°œ, ê´€ì¸¡ê°’ 102ê°œ
    - education: ì¬ì§ìì˜ í‰ê·  êµìœ¡ê¸°ê°„ (years)
    - income: ì¬ì§ìì˜ í‰ê·  ì†Œë“ (dollars)
    - women: ì—¬ì„± ì¬ì§ìì˜ ë¹„ìœ¨
    - prestige: ì§ì—…ì— ëŒ€í•œ ëª…ì„± ì ìˆ˜ (1960ë…„ëŒ€ ì¤‘ë°˜ì— ì‹¤ì‹œëœ ì‚¬íšŒ ì¡°ì‚¬ ê²°ê³¼)
    - census: ìºë‚˜ë‹¤ì˜ ì§ì—… ì½”ë“œ
    - type: ì§ì—… ë¶„ë¥˜: bc: blue color, prof: professional, wc: white color
```{r}
# install.packages('Prestige')
library(car)
data(Prestige)
df <- Prestige
str(df)

table(df$type)
barplot(table(df$type))

hist(df$income, breaks = 20)

# ìƒ¤í”¼ë¡œ í…ŒìŠ¤íŠ¸
shapiro.test(df$income)
# W = 0.81505, p-value = 5.634e-10 => ì •ê·œë¶„í¬ì™€ëŠ” ë¬´ê´€í•œ ë¶„í¬ì´ë‹¤.

# hist ê·¸ë˜í”„ë¥¼ ë³´ê³  ì •ê·œë¶„í¬ì— ê°€ê¹Œì›Œë³´ì´ëŠ” ê²ƒì„ ìƒ¤í”¼ë¡œ í…ŒìŠ¤íŠ¸ë¡œ í™•ì¸
hist(df$prestige, col = rainbow(1), breaks = 20)
shapiro.test(df$prestige)

plot(df[, -(5:6)], pch = 19, col = 'steelblue')
lm(income ~ education, data = df)
cor(df[, -(5:6)])

model <- lm(income ~ education, data = df)
summary(model)
# educationê³¼ prestigeëŠ” ì„œë¡œ ì˜í–¥ì„ ë°›ìŒ. ê·¸ë˜ì„œ ì´ ì˜í–¥ì„ ë°˜ì˜í•˜ê¸° ìœ„í•´ íŒ¨ë„í‹°ë¥¼ ì¤˜ì•¼í•¨?

plot(income ~ education, data = df, col = 'skyblue', pch =19)
abline(model, col = 'red', lwd = 2)
```


```{r}
model <- lm(income ~ education + women + prestige, data = df)
summary(model)

model <- lm(income ~ education + women + prestige, data = df)
summary(model)

model <- lm(income ~ education + prestige, data = df)
summary(model)

model <- lm(income ~ women + prestige, data = df)
summary(model)

par(mfrow = c(2,2)) # matploblibì˜ subplotê³¼ ë¹„ìŠ·
plot(model)
par(mfrow = c(1,1))

library(stargazer)
stargazer(model, type = 'text')
```

```{r}
# overfitting ê³¼ì í•©, underfitting?

model <- lm(income ~ education, data = df)
plot(income ~ education, data = df,
     col = 'skyblue', pch = 19)

model <- lm(income ~ education, I(education^2), data = df)
summary(model)
abline(model)

# install.packages('tidyverse')
library(tidyverse)
library(dplyr)
md
```















------------------- PPT --------------------------
## â–ª ë‹¨ìˆœ ì„ í˜•íšŒê·€: simple linear regression
  â€¢ êµìœ¡ê¸°ê°„ê³¼ í‰ê· ì†Œë“ ê°„ì—ëŠ” ì„ í˜• ê´€ê³„ê°€ ìˆì„ê¹Œ?
  - ì¢…ì†ë³€ìˆ˜: í‰ê· ì†Œë“(income)
  - ë…ë¦½ë³€ìˆ˜: êµìœ¡ê¸°ê°„(education)
```{r}
cor(df$education, df$income)
plot(income ~ education, data = df, pch = 19, col = 'blue')
model <- lm(income ~ education, data = df)
abline(model, col = 'pink', lwd = 2)
```

## â–ª ë‹¤ì¤‘ ì„ í˜•íšŒê·€: multiple linear regression
  â€¢ ì¢…ì†ë³€ìˆ˜ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ë…ë¦½ë³€ìˆ˜ê°€ ì—¬ëŸ¬ ê°œì¼ ê²½ìš°
    - ë‹¤ì¤‘ íšŒê·€ì‹: ğ‘¦ = ğ›½0 + ğ›½1ğ‘¥1 + ğ›½2ğ‘¥2 + â‹¯ + ğ›½ğ‘›ğ‘¥ğ‘›
  â€¢ í‰ê· ì†Œë“ì— ì˜í–¥ì„ ì£¼ëŠ” ìš”ì¸ì€ ë¬´ì—‡ì¼ê¹Œ?
    - ì¢…ì†ë³€ìˆ˜: í‰ê· ì†Œë“(income)
    - ë…ë¦½ë³€ìˆ˜: êµìœ¡(education), ì„±ë³„(women), ëª…ì„±(prestige)
```{r}

```



## â–ª ë‹¤í•­ ì„ í˜•íšŒê·€: polynomial linear regression
  â€¢ ì¢…ì†ë³€ìˆ˜ë¥¼ ë…ë¦½ë³€ìˆ˜ì˜ ë‹¤í•­ì‹ì´ ë” ì˜ ì„¤ëª…í•˜ëŠ” ê²½ìš°
  - ë‹¤í•­ íšŒê·€ì‹: 
  ğ‘¦ = ğ›½0 + ğ›½1ğ‘¥1 + ğ›½2ğ‘¥2 + â‹¯ + ğ›½ğ‘›ğ‘¥ğ‘›
  â€¢ êµìœ¡ê¸°ê°„ê³¼ í‰ê· ì†Œë“ì˜ ê´€ê³„ë¥¼ ì§ì„ ë³´ë‹¤ ë” ì˜ ì„¤ëª…í•˜ëŠ” ê³¡ì„ ì´ ìˆì„ê¹Œ?
    - ì¢…ì†ë³€ìˆ˜: í‰ê· ì†Œë“(income)
    - ë…ë¦½ë³€ìˆ˜: êµìœ¡ê¸°ê°„(education)
overfitting ê³¼ì í•©, underfitting?
```{r}

```






















